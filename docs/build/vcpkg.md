---
title: 'vcpkg: диспетчер пакетов C++ для Windows, Linux и macOS'
description: vcpkg — это диспетчер пакетов на базе командной строки, который существенно упрощает получение и установку библиотек C++ с открытым кодом в Windows, Linux и macOS.
ms.custom: contperf-fy21q2
ms.date: 12/11/2020
ms.topic: overview
ms.technology: cpp-ide
ms.openlocfilehash: f937f1df718bf8dfcc0ae5166d8b9eb671d2d8ab
ms.sourcegitcommit: 2b2c3fa9244e31db35ea33554dea0efcab490f3c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/18/2020
ms.locfileid: "97682470"
---
# <a name="vcpkg-a-c-package-manager-for-windows-linux-and-macos"></a>vcpkg: диспетчер пакетов C++ для Windows, Linux и macOS

vcpkg — это кроссплатформенный диспетчер пакетов командной строки для библиотек C и C++. Он упрощает получение и установку сторонних библиотек в Windows, Linux и macOS. Если в вашем проекте используются сторонние библиотеки, рекомендуем использовать vcpkg для их установки. Диспетчер vcpkg поддерживает как библиотеки с открытым исходным кодом, так и закрытые библиотеки. Все библиотеки в каталоге vcpkg для Windows были протестированы на совместимость с Visual Studio 2015, Visual Studio 2017 и Visual Studio 2019. На данный момент vcpkg поддерживает тысячи библиотек в каталогах Windows, Linux и macOS. Сообщество C++ постоянно добавляет новые библиотеки в эти каталоги.

## <a name="how-to-get-and-use-vcpkg"></a>Как получить и использовать vcpkg

Чтобы установить vcpkg, создайте его локальный клон из репозитория GitHub [https://github.com/Microsoft/vcpkg](https://github.com/Microsoft/vcpkg). Затем запустите скрипт vcpkg-bootstrapper, который выполнит установку. Подробные инструкции по установке см. в разделе [Установка vcpkg](install-vcpkg.md). Сведения о том, как интегрировать vcpkg с вашей средой разработки Visual Studio или Visual Studio Code, см. в разделе [Интеграция vcpkg](integrate-vcpkg.md). Сведения об использовании vcpkg для установки или обновления библиотеки см. в разделе [Управление библиотеками с помощью vcpkg](manage-libraries-with-vcpkg.md). Дополнительные сведения о командах vcpkg см. в [справочнике по командной строке vcpkg](vcpkg-command-line-reference.md).

## <a name="how-vcpkg-works"></a>Принципы работы vcpkg

Проект vcpkg имеет открытый код и доступен на GitHub. *Клон* или локальная копия репозитория vcpkg содержит исполняемый файл vcpkg и *каталог*, представляющий собой список пакетов, описывающих библиотеку и ее параметры. Каждый пакет включает один или несколько *портов*, а также сведения о том, как получить библиотеку и выполнить ее сборку из источников или загрузить двоичную версию для конкретной целевой среды. При установке библиотеки с помощью vcpkg он использует сведения пакета и сведения о портах для загрузки и создания готовой к использованию локальной копии библиотеки в подкаталоге каталога vcpkg.

Если библиотеки доступны в виде исходных файлов, vcpkg загружает исходные файлы вместо двоичных файлов. Затем он компилирует эти исходные файлы, используя самую актуальную найденную версию Visual Studio. Для совместимости с ABI C++ важно, чтобы используемые библиотеки и код приложения были скомпилированы с помощью одного компилятора одной и той же версии. Использование vcpkg позволяет устранить или как минимум сильно уменьшить риск появления несовместимых двоичных файлов, способных привести к проблемам. В командах разработчиков, специализирующихся на определенной версии компилятора, скачивание исходных файлов и компиляцию набора двоичных файлов с помощью vcpkg можно поручить одному члену команды. Требовать от каждого члена команды скачивать и компилировать библиотеки может быть неэффективно. Эту задачу способен выполнить один человек, который может использовать команду **`vcpkg export`** , чтобы создать ZIP-файл двоичных файлов и заголовков или пакет NuGet. Затем он может легко предоставить его другим членам команды.

## <a name="customize-vcpkg-instances-for-different-targets"></a>Настройка экземпляров vcpkg для разных целевых объектов

Вы можете создать несколько копий или *экземпляров* vcpkg на своем компьютере и настроить каждый из них для конкретных целей. Например, в каждом экземпляре можно установить разные библиотеки и даже разные версии библиотек, которые отличаются от находящихся в общедоступном каталоге. Каждый экземпляр можно настроить для создания собственной коллекции библиотек с помощью предпочтительных параметров компиляции. Каждый экземпляр является автономной средой, в которой имеется собственная копия vcpkg.exe, работающая только в своей собственной иерархии. Диспетчер пакетов vcpkg не добавляется ни к каким переменным среды и не имеет зависимостей от Visual Studio или реестра Windows.

Можно также создать клон vcpkg с закрытыми библиотеками в коллекции портов. Вы можете добавить порт, который скачивает готовые двоичные файлы и файлы заголовков. Затем создайте файл *portfile.cmake*, который просто копирует эти файлы в нужное расположение.

## <a name="the-vcpkg-folder-hierarchy"></a>Иерархия папок vcpkg

Все функции и данные vcpkg автономно содержатся в одной иерархии каталогов на экземпляр. Никаких параметров реестра и переменных среды не используется. На вашем компьютере может быть сколько угодно экземпляров vcpkg, и они не будут конфликтовать друг с другом.

Содержимое экземпляра vcpkg

- *`buildtrees`*  — содержит вложенные папки с исходными файлами, из которых собирается каждая библиотека.
- *`docs`*  — документация и примеры.
- *`downloads`*  — кэшированные копии всех загруженных инструментов и исходных файлов. При выполнении команды установки vcpkg сначала выполняет поиск здесь.
- *`installed`*  — содержит заголовки и двоичные файлы для каждой установленной библиотеки. При интеграции с Visual Studio вы, по сути, указываете программе добавить эту папку в пути поиска.
- *`packages`*  — внутренняя папка для промежуточного хранения между установками.
- *`ports`*  — файлы, которые описывают каждую библиотеку в каталоге, ее версию и где ее можно скачать. При необходимости вы можете добавлять собственные порты.
- *`scripts`*  — скрипты (CMake, PowerShell), используемые vcpkg.
- *`toolsrc`*  — исходный код C++ для vcpkg и связанных компонентов.
- *`triplets`*  — содержит параметры для каждой поддерживаемой целевой платформы (например, x86-windows или x64-uwp).

## <a name="telemetry"></a>Телеметрия

vcpkg собирает данные об использовании, которые помогают улучшить работу. Данные, собранные корпорацией Майкрософт, являются анонимными. Вы можете отказаться от сбора данных телеметрии, повторно запустив скрипт **`bootstrap-vcpkg.bat`** или **`bootstrap-vcpkg.sh`** с параметром **`-disableMetrics`** . Также можно передать параметр **`--disable-metrics`** в vcpkg в командной строке. Кроме того, вы можете отключить метрики, задав переменную среды `VCPKG_DISABLE_METRICS`.

## <a name="send-feedback-about-vcpkg"></a>Отправка отзыва о vcpkg

Используйте команду **`vcpkg contact --survey`** , чтобы отправить в корпорацию Майкрософт отзыв о vcpkg, включая отчеты об ошибках и предложения о функциях. Дополнительные сведения см. в [справочнике по командной строке vcpkg](vcpkg-command-line-reference.md).

## <a name="see-also"></a>См. также раздел

[vcpkg на GitHub](https://github.com/Microsoft/vcpkg)\
[Установка vcpkg](install-vcpkg.md)\
[Интеграция vcpkg](integrate-vcpkg.md)\
[Управление библиотеками с помощью vcpkg](manage-libraries-with-vcpkg.md)\
[Справочник по командной строке vcpkg](vcpkg-command-line-reference.md)\
[Краткое руководство](https://github.com/microsoft/vcpkg/blob/master/docs/index.md)\
[Часто задаваемые вопросы по Аналитике компьютеров](https://github.com/microsoft/vcpkg/blob/master/docs/about/faq.md)
